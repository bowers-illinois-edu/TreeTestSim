% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/synthetic_data.R
\name{generate_synthetic_experiment}
\alias{generate_synthetic_experiment}
\title{Generate a Synthetic Block-Randomized Experiment with k-ary Tree Structure}
\usage{
generate_synthetic_experiment(
  k,
  max_level,
  N_per_block = 50L,
  t = 0.5,
  block_sd = 0.5
)
}
\arguments{
\item{k}{Integer. Branching factor (number of children per internal node).}

\item{max_level}{Integer. Tree depth (number of levels below the root).
Total number of leaf blocks is \code{k^max_level}.}

\item{N_per_block}{Integer. Number of observations per leaf block
(default 50). Must be even for balanced randomization.}

\item{t}{Numeric between 0 and 1. Probability that a leaf is non-null (has a
treatment effect). Propagated bottom-up: internal nodes are non-null if
any descendant leaf is non-null.}

\item{block_sd}{Numeric. Standard deviation of block-level baseline
means (default 0.5). Individual outcomes are
\code{y0 ~ N(block_mean, 1)}.}
}
\value{
A list with components:
\describe{
\item{idat}{Individual-level data.table with columns: \code{bF} (block
factor), \code{id}, \code{y0} (potential outcome under control),
\code{trt} (0/1 treatment), \code{trtF} (factor treatment),
\code{blockF} (same as bF), \code{lvls_fac}, \code{nonnull}.}
\item{bdat}{Block-level data.table with columns: \code{bF}, \code{blockF},
\code{nonnull}, \code{lvls_fac}, \code{nb}, \code{hwt} (harmonic mean
weight).}
}
}
\description{
Creates individual-level and block-level data for a complete k-ary tree
experiment. Leaf nodes are blocks with \code{N_per_block} observations each,
block-randomized to treatment and control. The block hierarchy is encoded in
a factor variable (\code{lvls_fac}) suitable for use with
\code{\link[manytestsr]{splitSpecifiedFactorMulti}}.
}
\examples{
synth <- generate_synthetic_experiment(k = 4, max_level = 2, N_per_block = 50, t = 0.5)
dim(synth$idat)  # 800 x ...
dim(synth$bdat)  # 16 x ...

}
